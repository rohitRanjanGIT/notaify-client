generator client {
  provider = "prisma-client"
  output   = "../lib/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Project {
  id              String     @id @default(uuid())
  user_id         String
  name            String
  description     String
  projectName     String
  llmType         LlmType?
  llmApiKey       String?
  llmApiModel     String?
  smtpUser        String?
  smtpPass        String?
  emailTo         String?
  notaifyApiKey   String?
  notaifyApiKeyId String?
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt
  errorLogs       errorLog[]

  @@map("projects")
}

model errorLog {
  id          String   @id @default(uuid())
  projectId   String
  error       String
  LLmType     LlmType
  timestamp   DateTime @default(now())
  llmApiModel String?
  resolution  String?
  isTrial     Boolean  @default(false)
  project     Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@map("error_logs")
}

enum LlmType {
  openai
  claude
  google
}
